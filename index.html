<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8" />
    <title>ä½ çš„æ°´æœäººæ ¼ç»é…æ˜¯è°ï¼Ÿ</title>

    <!-- ç§»åŠ¨ç«¯é€‚é… -->
    <meta name="viewport"
          content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="format-detection" content="telephone=no,email=no" />

    <!-- iOS / å¾®ä¿¡å°ä¼˜åŒ– -->
    <style>
        * { -webkit-tap-highlight-color: rgba(0,0,0,0); }
        body {
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            user-select: none;
        }
    </style>

    <!-- Tailwind CDN -->
    <script src="https://cdn.tailwindcss.com"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;700&display=swap');

        body {
            font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text", system-ui, sans-serif;
            background-color: #000;
            color: #fff;
            overflow-x: hidden;
        }
        .serif { font-family: 'Noto Serif SC', "STSong", "Songti SC", serif; }

        /* åŠ¨ç”» */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to   { opacity: 1; transform: translateY(0); }
        }
        @keyframes pulse-slow {
            0%, 100% { transform: scale(1); opacity: 1; }
            50%      { transform: scale(1.04); opacity: 0.85; }
        }
        @keyframes spin-slow {
            from { transform: rotate(0deg); }
            to   { transform: rotate(360deg); }
        }
        @keyframes slice {
            0%   { width: 0; opacity: 0; left: -50%; }
            50%  { width: 200%; opacity: 1; }
            100% { left: 150%; opacity: 0; width: 0; }
        }
        @keyframes flash {
            0%   { opacity: 0; }
            50%  { opacity: 1; }
            100% { opacity: 0; }
        }

        .animate-fade-in     { animation: fadeIn 0.8s ease-out forwards; }
        .animate-pulse-slow  { animation: pulse-slow 3s infinite ease-in-out; }
        .animate-spin-slow   { animation: spin-slow 8s linear infinite; }
        .animate-slice       { animation: slice 0.6s cubic-bezier(0.22,0.61,0.36,1) forwards; }
        .animate-flash       { animation: flash 0.5s ease-out forwards; }

        ::-webkit-scrollbar { width: 0px; background: transparent; }

        img {
            user-select: none;
            -webkit-user-drag: none;
        }

        .safe-top    { padding-top: env(safe-area-inset-top); }
        .safe-bottom { padding-bottom: env(safe-area-inset-bottom); }

        /* === å¼€å±èƒŒæ™¯åŠ¨æ€æ•ˆæœ === */

        /* èƒŒæ™¯å›¾ï¼šè½»å¾®å‘¼å¸ç¼©æ”¾ + ä¸Šä¸‹æ¼‚æµ® */
        @keyframes bgHeroFloat {
            0% {
                transform: scale(1) translateY(0);
            }
            50% {
                transform: scale(1.06) translateY(-8px);
            }
            100% {
                transform: scale(1) translateY(0);
            }
        }

        .bg-hero-animate {
            animation: bgHeroFloat 14s ease-in-out infinite;
            transform-origin: center center;
            will-change: transform;
        }

        /* æ˜Ÿå…‰é—ªçƒå±‚ */
        .star-twinkle-layer {
            position: absolute;
            inset: 0;
            background-image:
                radial-gradient(circle at 10% 20%, rgba(255,255,255,0.70) 0, rgba(255,255,255,0) 45%),
                radial-gradient(circle at 80% 30%, rgba(255,230,180,0.8) 0, rgba(255,230,180,0) 50%),
                radial-gradient(circle at 20% 80%, rgba(150,200,255,0.7) 0, rgba(150,200,255,0) 55%);
            mix-blend-mode: screen;
            opacity: 0.28;
            animation: starTwinkle 6s ease-in-out infinite alternate;
            pointer-events: none;
        }

        /* æ˜Ÿå…‰æ˜æš—å˜åŒ– */
        @keyframes starTwinkle {
            0% {
                opacity: 0.1;
                transform: translate3d(0, 0, 0) scale(1);
            }
            50% {
                opacity: 0.35;
                transform: translate3d(3px, -4px, 0) scale(1.03);
            }
            100% {
                opacity: 0.18;
                transform: translate3d(-2px, 3px, 0) scale(1.01);
            }
        }

        /* iOS â€œå‡å°‘åŠ¨æ€â€å…¼å®¹ */
        @media (prefers-reduced-motion: reduce) {
            .bg-hero-animate,
            .star-twinkle-layer {
                animation: none !important;
                transform: none !important;
            }
        }
    </style>
</head>
<body class="flex justify-center min-h-screen">

<!-- æ‰‹æœºå°ºå¯¸å®¹å™¨ -->
<div id="app"
     class="w-full max-w-[450px] bg-black relative shadow-2xl min-h-screen flex flex-col">

    <!-- èƒŒæ™¯ï¼šæ”¹ä¸ºç”¨ opening-bg.jpg + åŠ¨æ€æ•ˆæœ -->
    <div class="absolute inset-0 z-0 pointer-events-none">
        <div class="w-full h-full relative overflow-hidden">
            <!-- èƒŒæ™¯å›¾ï¼šç¼“æ…¢ç¼©æ”¾+æ¼‚æµ® -->
            <img src="opening-bg.jpg"
                 alt=""
                 class="w-full h-full object-cover opacity-80 bg-hero-animate"
                 style="filter: saturate(1.1) contrast(1.05);">
            <!-- æ¸å˜å åŠ ï¼Œä¿æŒæ–‡å­—å¯è¯»æ€§ -->
            <div class="absolute inset-0 bg-gradient-to-b from-black/40 via-black/55 to-black/90"></div>
            <!-- æ˜Ÿå…‰é—ªçƒå±‚ -->
            <div class="absolute inset-0 pointer-events-none star-twinkle-layer"></div>
        </div>
    </div>

    <!-- å†…å®¹ -->
    <div id="content"
         class="relative z-10 w-full flex-1 flex flex-col safe-top safe-bottom">
    </div>

    <!-- å¾®ä¿¡é¡¶éƒ¨æç¤º -->
    <div id="wx-tip"
         class="hidden fixed top-0 left-0 right-0 z-30 bg-black/80 text-white text-[11px] px-4 py-2 text-center">
        åœ¨å¾®ä¿¡ä¸­æµè§ˆæ—¶ï¼Œæ¨èç‚¹å‡»å³ä¸Šè§’ â€œÂ·Â·Â·â€ ä½¿ç”¨æµè§ˆå™¨æ‰“å¼€ï¼Œä½“éªŒæ›´æµç•… ğŸ‘
    </div>
</div>

<script>
    // ------------ 1. é¢˜ç›® ------------
    const questions = [
        {
            id: 1, question: "ä½ çš„èƒ½é‡æ¥è‡ªå“ªé‡Œï¼Ÿ",
            options: [
                { text: "A. è¢«äººçœ‹è§ã€è¢«è®¤å¯", weights: ["peach", "cherry"] },
                { text: "B. ç‹¬å¤„æ—¶çš„çµæ„Ÿå’Œå¹»æƒ³", weights: ["kiwi", "watermelon"] },
                { text: "C. å¸®åŠ©åˆ«äººã€å¸¦æ¥æ¸©æš–", weights: ["lemon", "pomegranate"] }
            ]
        },
        {
            id: 2, question: "å½“æƒ…ç»ªä½è½æ—¶ï¼Œä½ ä¼šï¼Ÿ",
            options: [
                { text: "A. ç”¨ç¬‘æ©é¥°ä¸€åˆ‡ï¼Œå‡è£…æ²¡äº‹", weights: ["orange", "pineapple"] },
                { text: "B. è¿œç¦»äººç¾¤ï¼Œç‹¬è‡ªç–—æ„ˆ", weights: ["lemon", "dragonfruit"] },
                { text: "C. å»åšç‚¹æœ‰è¶£çš„äº‹è®©è‡ªå·±åŠ¨èµ·æ¥", weights: ["peach", "guava"] }
            ]
        },
        {
            id: 3, question: "åœ¨äººç¾¤ä¸­ï¼Œä½ é€šå¸¸æ˜¯ï¼Ÿ",
            options: [
                { text: "A. æ´»è·ƒçš„ä¸­å¿ƒäººç‰©", weights: ["peach", "orange"] },
                { text: "B. å†·é™è§‚å¯Ÿè€…", weights: ["kiwi", "sugarcane", "starfruit"] },
                { text: "C. è‡ªç„¶æµéœ²é­…åŠ›ï¼Œä¸åˆ»æ„ä½†è¢«å–œæ¬¢", weights: ["pineapple", "watermelon"] }
            ]
        },
        {
            id: 4, question: "ä½ æ›´ç›¸ä¿¡å“ªç§å¹¸ç¦ï¼Ÿ",
            options: [
                { text: "A. çƒ­çƒˆä¸”çŸ­æš‚çš„ç¬é—´", weights: ["peach", "cherry"] },
                { text: "B. é•¿ä¹…ç¨³å®šçš„é™ªä¼´", weights: ["pomegranate", "lemon"] },
                { text: "C. ç‹¬è‡ªä¹Ÿèƒ½å‘å…‰çš„è‡ªç”±", weights: ["kiwi", "guava", "dragonfruit"] }
            ]
        },
        {
            id: 5, question: "å¦‚æœç”¨ä¸€å¥è¯å½¢å®¹ä½ çš„äººç”Ÿæ€åº¦ï¼š",
            options: [
                { text: "A. â€œæˆ‘æƒ³è¢«çœ‹è§ã€‚â€", weights: ["peach", "cherry"] },
                { text: "B. â€œæˆ‘ä¸å®Œç¾ï¼Œä½†æˆ‘è‡ªç”±ã€‚â€", weights: ["guava", "dragonfruit"] },
                { text: "C. â€œæˆ‘ç”¨çˆ±å»ä¿®å¤ä¸€åˆ‡ã€‚â€", weights: ["lemon", "pomegranate"] }
            ]
        },
        {
            id: 6, question: "ä½ æœ€æ¸´æœ›åˆ«äººæ€æ ·çœ‹ä½ ï¼Ÿ",
            options: [
                { text: "A. é…·ã€æœ‰è¶£ã€ç‹¬ç‰¹", weights: ["kiwi", "starfruit", "pineapple"] },
                { text: "B. æ¸©æŸ”ã€æœ‰æ·±åº¦", weights: ["lemon", "pomegranate", "dragonfruit"] },
                { text: "C. è‡ªä¿¡ã€é—ªäº®ã€éš¾ä»¥å¿˜è®°", weights: ["peach", "cherry", "orange"] }
            ]
        }
    ];

    // ------------ 2. ç»“æœé…ç½®ï¼ˆä½¿ç”¨ä½ ä¸Šä¼ çš„å›¾ç‰‡ï¼‰ ------------
    const results = {
        peach: {
            img: "peach.jpg",
            name: "æ¡ƒå­äººæ ¼",
            icon: "ğŸ‘",
            color: "from-pink-300 via-orange-200 to-red-200",
            title: "è¢«çœ‹è§çš„è‰ºæœ¯å®¶",
            keywords: ["æŸ”è½¯", "å¤–å‘", "å¾®å­¤ç‹¬"],
            quote: "â€œæˆ‘å‡†å¤‡å¥½äº†è¢«çœ‹è§ã€‚â€",
            desc: "ç”œç¾åˆæœ‰ç‚¹å±é™©ï¼Œç¤¾äº¤é«˜æ‰‹ã€çµé­‚å­¤ç‹¬ã€‚ä½ è¯»æ‡‚åˆ«äººï¼Œä¹Ÿå¶å°”è¯»ä¸æ‡‚è‡ªå·±ï¼Œåœ¨è¢«å›´è§‚å’Œè¢«ç†è§£ä¹‹é—´æ¥å›æ‘‡æ‘†ã€‚",
            matchName: "æŸ æª¬äººæ ¼",
            matchDesc: "ä»–æ˜¯é…¸çš„è§£è¯ï¼Œä½ æ˜¯ç”œçš„å¼•çº¿ã€‚ä½ è´Ÿè´£ç‚¹ç‡ƒï¼ŒTAè´Ÿè´£è®©ä¸€åˆ‡å›åˆ°ç°å®ã€‚"
        },
        lemon: {
            img: "lemon.jpg",
            name: "æŸ æª¬äººæ ¼",
            icon: "ğŸ‹",
            color: "from-yellow-200 via-amber-300 to-sky-300",
            title: "é…¸æ¶©çš„æ®‰é“è€…",
            keywords: ["æ¸…é†’", "ç–—æ„ˆ", "å¾®å…‰"],
            quote: "â€œé»‘å¤œè¶Šæ·±ï¼Œé…¸æ¥šè¶Šäº®ã€‚â€",
            desc: "ä½ æ˜¯åˆ€é”‹ä¸‹çš„æ¸©æŸ”æ²»æ„ˆè€…ã€‚çœ‹å¾—å¾ˆæ¸…æ¥šï¼Œä¹Ÿæ„Ÿå—å¾—å¾ˆæ·±ã€‚ä½ æ‡‚æ‰€æœ‰äººçš„éš¾ï¼Œå´å¾ˆå°‘æ‰¿è®¤è‡ªå·±çš„ç´¯ã€‚",
            matchName: "æ¡ƒå­äººæ ¼",
            matchDesc: "ä¸€ä¸ªæ•¢çˆ±ï¼Œä¸€ä¸ªæ•¢æ•‘ã€‚ä½ å¸®æ¡ƒå­çœ‹æ¸…ç°å®ï¼Œæ¡ƒå­è®©ä½ ç›¸ä¿¡æµªæ¼«ã€‚"
        },
        cherry: {
            img: "cherry.jpg",
            name: "è½¦å˜å­äººæ ¼",
            icon: "ğŸ’",
            color: "from-fuchsia-300 via-rose-400 to-purple-400",
            title: "ç²¾è‡´çš„å¹»æ¢¦å¨ƒå¨ƒ",
            keywords: ["å®Œç¾ä¸»ä¹‰", "è¢«å‡è§†", "èº«ä»½ç„¦è™‘"],
            quote: "â€œæˆ‘é—ªè€€ï¼Œä¹Ÿæ˜“ç¢ã€‚â€",
            desc: "ä½ å¤©ç”Ÿå¸¦ç€é•œå¤´æ„Ÿï¼Œèµ°åˆ°å“ªé‡Œéƒ½æ˜¯ç„¦ç‚¹ã€‚ä½†è¶Šè¢«çœ‹è§ï¼Œå°±è¶Šæ€•æš´éœ²è„†å¼±ã€‚ä½ åœ¨é—ªè€€ä¸è‡ªæˆ‘æ€€ç–‘ä¸­åå¤åˆ‡æ¢ã€‚",
            matchName: "æ¨æ¡ƒäººæ ¼",
            matchDesc: "æ£±è§’ä¸å…‰ç¯çš„æ‹¥æŠ±ã€‚ä½ ä»¬ä¸€ä¸ªè´Ÿè´£å‘å…‰ï¼Œä¸€ä¸ªè´Ÿè´£è¯´çœŸè¯ã€‚"
        },
        pineapple: {
            img: "pineapple.jpg",
            name: "è èäººæ ¼",
            icon: "ğŸ",
            color: "from-yellow-200 via-lime-300 to-emerald-300",
            title: "åˆ€é”‹ä¸Šçš„æ¸©æŸ”è´µæ—",
            keywords: ["é‡å¿ƒ", "è‡ªå¾‹", "éšå¿"],
            quote: "â€œæˆ‘ç¬‘ç€è¢«åˆ‡å¼€ï¼Œå› ä¸ºæˆ‘æœ‰é‡‘è‰²çš„å¿ƒã€‚â€",
            desc: "ä½ å¼ºå¤§ã€æ¸…é†’ã€ç›®æ ‡æ˜ç¡®ã€‚åˆ«äººçœ‹åˆ°çš„æ˜¯ä½ çš„åˆºï¼Œå´å¿½ç•¥ä½ å†…é‡Œçš„é¦™å’Œç”œã€‚",
            matchName: "è¥¿ç“œäººæ ¼",
            matchDesc: "åˆ€ä¸æœè‚‰ï¼Œäº’ä¸ºæŸ”è½¯ã€‚TAè®©ä½ å¸ä¸‹ç›”ç”²ï¼Œä½ è®©TAçœ‹è§è¾¹ç•Œã€‚"
        },
        kiwi: {
            img: "kiwi.jpg",
            name: "å¥‡å¼‚æœäººæ ¼",
            icon: "ğŸ¥",
            color: "from-green-200 via-emerald-300 to-cyan-300",
            title: "å­¤å²›å¤©æ‰",
            keywords: ["ç‹¬ç«‹", "å†…æ•›", "çµæ„Ÿ"],
            quote: "â€œæ€ªï¼Œä¹Ÿæ˜¯ä¸€ç§å¤©èµ‹ã€‚â€",
            desc: "ä½ æ˜¯æœ‰ç‚¹æ¯›èºã€åˆå¾ˆé€šé€çš„è‰ºæœ¯æ€ªèƒã€‚ä¸–ç•Œä¸ä¸€å®šæ‡‚ä½ ï¼Œä½†çµæ„Ÿæ°¸è¿œç«™åœ¨ä½ è¿™è¾¹ã€‚",
            matchName: "ç«é¾™æœäººæ ¼",
            matchDesc: "ç†æ€§ä¸è‰³ä¸½çš„å’Œå¼¦ã€‚ä½ ä»¬ä¼šä¸€èµ·é€ ä¸€åº§åªå±äºå½¼æ­¤çš„å¹³è¡Œå®‡å®™ã€‚"
        },
        guava: {
            img: "guava.jpg",
            name: "èŠ­ä¹äººæ ¼",
            icon: "ğŸ¥­",
            color: "from-pink-200 via-rose-200 to-amber-200",
            title: "é‡è›®å¥³ç‹",
            keywords: ["çƒ­çƒˆ", "è‰æ ¹", "åå›"],
            quote: "â€œæˆ‘ä¸å®Œç¾ï¼Œä½†æˆ‘çœŸå®ã€‚â€",
            desc: "ä½ ä»ä¸ä¼ªè£…ï¼Œæƒ…ç»ªæ¥å°±æ¥ï¼Œèµ°å°±èµ°ã€‚ä½ æ˜¯äººç¾¤é‡Œæœ€åµé—¹çš„ä¸€é¢—å¿ƒï¼Œä¹Ÿæ˜¯æœ€çœŸè¯šçš„ä¸€é¢—å¿ƒã€‚",
            matchName: "çŸ³æ¦´äººæ ¼",
            matchDesc: "é‡ä¸æŸ”çš„å¹³è¡¡ã€‚ä½ å¸®TAæ’•å¼€è§„è®­ï¼ŒTAæ•™ä½ å¦‚ä½•å¿ƒç–¼è‡ªå·±ã€‚"
        },
        pomegranate: {
            img: "pomegranate.jpg",
            name: "çŸ³æ¦´äººæ ¼",
            icon: "ğŸ…",
            color: "from-red-200 via-rose-300 to-amber-200",
            title: "è¢«èµç¾çš„ç‰ºç‰²è€…",
            keywords: ["æ¯æ€§", "æ‰¿å—", "é‡ç”Ÿ"],
            quote: "â€œæˆ‘çˆ±æ‰€æœ‰äººï¼Œä¹Ÿæƒ³è¢«è‡ªå·±çˆ±ã€‚â€",
            desc: "ä½ æ€»æ˜¯å…ˆç…§é¡¾åˆ«äººï¼Œå†æƒ³èµ·è‡ªå·±ã€‚ä½ æ“…é•¿ä»˜å‡ºï¼Œä¹Ÿåœ¨å­¦ç€æ‹’ç»ã€‚ä½ çš„æ¸©æŸ”ä¸æ˜¯å¤©ç”Ÿçš„è®¨å¥½ï¼Œè€Œæ˜¯è¢«ç£¨å‡ºæ¥çš„åŠ›é‡ã€‚",
            matchName: "èŠ­ä¹äººæ ¼",
            matchDesc: "ä¸€ä¸ªæ•™å¯¹æ–¹æ´»ï¼Œä¸€ä¸ªæ•™å¯¹æ–¹çˆ±ã€‚"
        },
        sugarcane: {
            img: "sugarcane.jpg",
            name: "ç”˜è”—äººæ ¼",
            icon: "ğŸ§ƒ",
            color: "from-emerald-300 via-green-300 to-slate-200",
            title: "ç”œçš„å¥‰çŒ®è€…",
            keywords: ["æ¸©é¡º", "éšå¿", "è‹é†’"],
            quote: "â€œè¿™æ¬¡ï¼Œæˆ‘ä¸ºè‡ªå·±ç”œã€‚â€",
            desc: "ä½ ä¹ æƒ¯æŠŠå¥½ä¸œè¥¿ç•™ç»™åˆ«äººï¼ŒæŠŠå‹åŠ›ç•™ç»™è‡ªå·±ã€‚ç›´åˆ°æœ‰ä¸€å¤©ï¼Œä½ ç»ˆäºæ„è¯†åˆ°ï¼šä½ çš„ç”œï¼Œä¹Ÿå¯ä»¥åªä¸ºè‡ªå·±ä¿ç•™ã€‚",
            matchName: "è èäººæ ¼",
            matchDesc: "ç”œé‡ä¸Šåˆºï¼Œæ‰æˆå°±å®Œæ•´çš„å‘³é“ã€‚"
        },
        watermelon: {
            img: "watermelon.jpg",
            name: "è¥¿ç“œäººæ ¼",
            icon: "ğŸ‰",
            color: "from-teal-200 via-lime-300 to-yellow-200",
            title: "å®‡å®™æµªæ¼«å®¶",
            keywords: ["æµåŠ¨", "æ¬¢ä¹", "å®½å®¹"],
            quote: "â€œæˆ‘ä¸æ€•è™šæ— ï¼Œå› ä¸ºæˆ‘è‡ªå¸¦å¼•åŠ›ã€‚â€",
            desc: "ä½ è‡ªç”±ã€æ¾å¼›ã€å¯¹ä¸–ç•Œä¿æŒå¥½å¥‡å¿ƒã€‚ä½ ä¸å¼ºæ±‚åˆ«äººç•™ä¸‹ï¼Œä½†æ„¿æ„ä¸ºå–œæ¬¢çš„äººä¸€ç›´äº®ç€ã€‚",
            matchName: "è èäººæ ¼",
            matchDesc: "é˜³å…‰æ’ä¸Šé‡‘è‰²ã€‚ä½ è®©TAè½¯ä¸€ç‚¹ï¼ŒTAè®©ä½ ç¨³ä¸€ç‚¹ã€‚"
        },
        dragonfruit: {
            img: "dragonfruit.jpg",
            name: "ç«é¾™æœäººæ ¼",
            icon: "ğŸ‰",
            color: "from-fuchsia-200 via-pink-300 to-slate-100",
            title: "è‰³ä¸½çš„å¹¸å­˜è€…",
            keywords: ["è‰ºæœ¯", "æƒ…ç»ª", "çœŸå¿ƒ"],
            quote: "â€œæˆ‘äº®è¿‡ï¼Œä¹Ÿç—›è¿‡ã€‚â€",
            desc: "ä½ åƒä¸€åœºæ°¸è¿œä¸ä¼šé‡æ¼”çš„ç°åœºæ¼”å‡ºã€‚å¤–è¡¨é²œè‰³ã€è¯­æ°”è½»æ¾ï¼Œå¿ƒé‡Œå´è—ç€å¾ˆå¤šæ²¡äººçŸ¥é“çš„é»‘æ´ã€‚",
            matchName: "å¥‡å¼‚æœäººæ ¼",
            matchDesc: "è‰³ä¸½ä¸å­¤ç‹¬çš„ç–—æ„ˆã€‚ä½ ä»¬äº’ç›¸æ‰¿è®¤å¯¹æ–¹çš„å¥‡æ€ªï¼Œä¹Ÿäº’ç›¸å®ˆæŠ¤å¯¹æ–¹çš„æ•æ„Ÿã€‚"
        },
        orange: {
            img: "orange.jpg",
            name: "æ©™å­äººæ ¼",
            icon: "ğŸŠ",
            color: "from-orange-200 via-rose-200 to-amber-200",
            title: "å…ƒæ°”ä¹å¤©æ´¾",
            keywords: ["é˜³å…‰", "æ©é¥°", "æ´»åŠ›"],
            quote: "â€œæˆ‘çš„å¿«ä¹ï¼Œæ˜¯ä½ çš„å…‰ã€‚â€",
            desc: "ä½ æ˜¯æ‰€æœ‰äººå¿ƒé‡Œçš„å°å¤ªé˜³ã€‚ä½ ä¹ æƒ¯ç”¨ç¬‘å’Œæ®µå­æŒ¡ä½é»‘æš—ï¼Œä½†çœŸæ­£ç†è§£ä½ çš„äººå¹¶ä¸å¤šã€‚",
            matchName: "è¥¿ç“œäººæ ¼",
            matchDesc: "å¿«ä¹å åŠ å¿«ä¹ã€‚ä½ ä»¬ä¼šä¸€èµ·æŠŠæ—¥å¸¸è¿‡æˆå¤å¤©ã€‚"
        },
        starfruit: {
            img: "starfruit.jpg",
            name: "æ¨æ¡ƒäººæ ¼",
            icon: "â­",
            color: "from-yellow-200 via-amber-200 to-slate-50",
            title: "å­¤ç‹¬çš„ç†æƒ³å®¶",
            keywords: ["æ£±è§’", "ç‹¬ç‰¹", "æ´å¯Ÿ"],
            quote: "â€œæˆ‘æ˜¯æ˜Ÿæ˜Ÿçš„åˆ‡ç‰‡ã€‚â€",
            desc: "ä½ æœ‰é”‹åˆ©çš„è¾¹ï¼Œä¹Ÿæœ‰æŸ”è½¯çš„å¿ƒã€‚ä½ çœ‹ç©¿å¾ˆå¤šè™šå‡ï¼Œåˆä¸æ„¿è½»æ˜“è¯´ç ´ï¼Œåªæ˜¯æ‚„æ‚„ä¿æŒè·ç¦»ã€‚",
            matchName: "è½¦å˜å­äººæ ¼",
            matchDesc: "æ£±è§’ä¸å…‰ç¯çš„æ‹¥æŠ±ã€‚ä½ ä»¬ä¸€ä¸ªè´Ÿè´£åšæ¢¦ï¼Œä¸€ä¸ªè´Ÿè´£æ‹†ç©¿æ¢¦ã€‚"
        }
    };

    // ------------ 3. çŠ¶æ€ç®¡ç† ------------
    let currentState = {
        view: 'start',
        currentQ: 0,
        answers: [],
        finalResult: null
    };

    const app = document.getElementById('content');

    // ------------ 4. æ¸²æŸ“ ------------
    function render() {
        app.innerHTML = '';
        if (currentState.view === 'start')   renderStart();
        else if (currentState.view === 'quiz')   renderQuiz();
        else if (currentState.view === 'loading') renderLoading();
        else if (currentState.view === 'result')  renderResult();
    }

    // é¦–é¡µï¼šå¤§èƒŒæ™¯ + å°è¡Œæ˜Ÿå¸¦æ°´æœç¼©ç•¥å›¾
    function renderStart() {
        const thumbFruits = [
            { key: 'peach', img: 'peach.jpg' },
            { key: 'lemon', img: 'lemon.jpg' },
            { key: 'orange', img: 'orange.jpg' },
            { key: 'kiwi', img: 'kiwi.jpg' },
            { key: 'pineapple', img: 'pineapple.jpg' },
            { key: 'pomegranate', img: 'pomegranate.jpg' },
            { key: 'starfruit', img: 'starfruit.jpg' },
            { key: 'watermelon', img: 'watermelon.jpg' }
        ];

        const html = `
            <div class="flex flex-col justify-between min-h-screen px-6 pt-10 pb-10 animate-fade-in">
                <header class="mb-4">
                    <div class="text-[10px] tracking-[0.4em] opacity-70 mb-2">
                        ROACYZHENG Â· FRUIT UNIVERSE
                    </div>
                    <h1 class="text-3xl font-bold leading-snug drop-shadow-[0_0_14px_rgba(255,160,80,0.9)]">
                        ä½ çš„<span class="text-orange-300">æ°´æœäººæ ¼</span><br/>
                        ç»é…æ˜¯è°ï¼Ÿ
                    </h1>
                </header>

                <!-- ä¸­é—´å±•ç¤ºï¼šhome èƒŒæ™¯ä¸Šï¼Œä¸€æ¡æ°´æœæ˜Ÿå¸¦ -->
                <section class="mt-4 mb-8">
                    <div class="w-full rounded-3xl border border-white/15 bg-black/35 backdrop-blur-md px-4 py-4">
                        <div class="text-[11px] opacity-70 mb-3">
                            åœ¨è‰ºæœ¯å®¶ <span class="font-semibold">éƒ‘å†²</span> çš„ã€Œæ°´æœå®‡å®™ã€é‡Œï¼Œ<br/>
                            æ¯ä¸€é¢—æœå®ï¼Œéƒ½æ˜¯ä¸€ä¸ªçµé­‚çš„éšå–»ã€‚
                        </div>
                        <div class="flex items-center gap-3 overflow-x-auto pb-1">
                            ${
                                thumbFruits.map(f => `
                                    <div class="flex-shrink-0 w-12 h-12 rounded-full border border-white/40 overflow-hidden shadow-md">
                                        <img src="${f.img}" loading="lazy" class="w-full h-full object-cover" alt="" />
                                    </div>
                                `).join('')
                            }
                        </div>
                        <div class="mt-3 text-[10px] opacity-55">
                            å‘å³æ»‘ä¸€æ»‘ï¼Œæ„Ÿå—æ•´æ¡æ°´æœæ˜Ÿå¸¦ã€‚
                        </div>
                    </div>
                </section>

                <section class="mb-6 text-[11px] opacity-65 leading-relaxed">
                    èŠ± 1 åˆ†é’Ÿç­” 6 é¢˜ï¼Œ<br/>
                    çœ‹çœ‹ä½ æ˜¯å“ªä¸€é¢—æœäººæ ¼ï¼Œ<br/>
                    ä»¥åŠå‘½ä¸­æ³¨å®šçš„é‚£é¢—ã€Œç»é…æœã€æ˜¯è°ã€‚
                </section>

                <footer class="flex flex-col items-center gap-4">
                    <button onclick="startQuiz()"
                            class="w-full max-w-[260px] py-3.5 bg-gradient-to-r from-orange-400 to-pink-500 rounded-full
                                   font-bold text-lg shadow-[0_0_20px_rgba(255,165,0,0.55)]
                                   hover:scale-105 transition-transform active:scale-95 flex items-center justify-center gap-2 cursor-pointer">
                        å¼€å§‹åˆ‡å¼€çµé­‚ <span class="text-xl">â†’</span>
                    </button>

                    <div class="text-[10px] opacity-40 tracking-[0.25em]">
                        SCREENSHOT Â· SHARE Â· TAG @ROACYZHENG
                    </div>
                </footer>
            </div>
        `;
        app.innerHTML = html;
    }

    // ç­”é¢˜é¡µï¼šé¡¶éƒ¨å°è¡Œæ˜Ÿå¸¦ï¼Œåº•éƒ¨é—®é¢˜å¡
    function renderQuiz() {
        const q = questions[currentState.currentQ];
        const progress = ((currentState.currentQ + 1) / questions.length) * 100;

        const html = `
            <div class="min-h-screen px-6 pt-6 pb-8 flex flex-col animate-fade-in">
                <!-- é¡¶éƒ¨å¯¼èˆª + è¿›åº¦ -->
                <div class="mb-4">
                    <div class="flex justify-between items-center mb-2">
                        <div class="text-xs tracking-[0.25em] opacity-70">
                            FRUIT TEST
                        </div>
                        <div class="text-[11px] opacity-70">
                            ${currentState.currentQ + 1} / ${questions.length}
                        </div>
                    </div>
                    <div class="h-1 bg-white/10 rounded-full overflow-hidden">
                        <div class="h-full bg-orange-400 transition-all duration-500 ease-out"
                             style="width: ${progress}%"></div>
                    </div>
                </div>

                <!-- å°è¡Œæ˜Ÿå¸¦ï¼šç”¨å‡ å¼ ä»£è¡¨æ€§ç”»ä½œåšç¼©ç•¥ -->
                <div class="flex gap-2 mb-6 overflow-x-auto pb-1">
                    ${['peach','lemon','orange','kiwi','pineapple','pomegranate','starfruit','watermelon']
                        .map(key => `
                            <div class="flex-shrink-0 w-9 h-9 rounded-full overflow-hidden border border-white/30
                                        ${key === 'peach' ? 'shadow-[0_0_12px_rgba(255,160,80,0.9)]' : ''}">
                                <img src="${results[key].img}" loading="lazy" class="w-full h-full object-cover" alt="" />
                            </div>
                        `).join('')
                    }
                </div>

                <!-- é—®é¢˜åŒº -->
                <div class="flex-1">
                    <div class="mb-6">
                        <div class="text-xs uppercase opacity-60 tracking-[0.24em] mb-1">Question ${currentState.currentQ + 1}</div>
                        <h2 class="text-2xl font-bold leading-relaxed drop-shadow-md">
                            ${q.question}
                        </h2>
                    </div>

                    <div class="space-y-4">
                        ${
                            q.options.map((opt, idx) => `
                                <button onclick="handleAnswer(${idx})"
                                        class="w-full text-left p-5 rounded-2xl bg-black/45 border border-white/15
                                               backdrop-blur-md hover:bg-white/10 hover:border-orange-400/60
                                               transition-all active:scale-[0.97] cursor-pointer">
                                    <span class="text-base opacity-90">${opt.text}</span>
                                </button>
                            `).join('')
                        }
                    </div>
                </div>

                <div class="mt-8 text-[11px] opacity-45 text-center leading-relaxed">
                    ä¸ç”¨åå¤çº ç»“ï¼Œ<br/>ç¬¬ä¸€ååº”é€šå¸¸å°±æ˜¯ä½ çœŸå®çš„æ°´æœå†…æ ¸ã€‚
                </div>
            </div>
        `;
        app.innerHTML = html;
    }

    // Loadingï¼šå®‡å®™åˆ‡ç‰‡åŠ¨ç”»
    function renderLoading() {
        const html = `
            <div class="min-h-screen bg-black flex flex-col items-center justify-center relative overflow-hidden">
                <div id="nebula"
                     class="w-48 h-48 rounded-full bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500
                            blur-2xl opacity-70 animate-spin-slow"></div>

                <div id="laser"
                     class="hidden absolute inset-0 flex items-center justify-center">
                    <div class="w-[200%] h-[1px] bg-white shadow-[0_0_30px_white] rotate-[-45deg] animate-slice"></div>
                </div>

                <div id="flash"
                     class="hidden absolute inset-0 bg-white z-30 animate-flash"></div>

                <div id="loadingText"
                     class="absolute bottom-32 text-xs tracking-[0.5em] font-light animate-pulse text-white/80">
                    æ­£åœ¨æ”¶é›†å®‡å®™ä¿¡å·...
                </div>
            </div>
        `;
        app.innerHTML = html;

        const laser  = document.getElementById('laser');
        const flash  = document.getElementById('flash');
        const text   = document.getElementById('loadingText');
        const nebula = document.getElementById('nebula');

        setTimeout(() => {
            text.innerText = "æ­£åœ¨åˆ‡å¼€çµé­‚...";
            laser.classList.remove('hidden');
            nebula.style.animation = 'none';
            nebula.style.transform = 'scale(1.4)';
            nebula.style.filter = 'brightness(1.6)';
        }, 1500);

        setTimeout(() => {
            text.innerText = "æ‰¾åˆ°äº†ã€‚";
            flash.classList.remove('hidden');
        }, 2800);

        setTimeout(() => {
            currentState.view = 'result';
            render();
        }, 3500);
    }

    // ç»“æœé¡µï¼šå¤§åœ†ä¸»è§†è§‰ + ç»é…å°åœ†
    function renderResult() {
        const res = currentState.finalResult;
        const matchRes =
            Object.values(results).find(r => r.name === res.matchName) || results.peach;

        const html = `
            <div class="min-h-screen overflow-y-auto pb-32 animate-fade-in relative">
                <div class="px-6 pt-6 flex justify-between items-center opacity-80 text-[11px]">
                    <span class="tracking-[0.28em]">FRUIT Â· UNIVERSE</span>
                    <button onclick="location.reload()"
                            class="px-2 py-1 rounded-full bg-white/8 border border-white/16">
                        é‡æ–°æµ‹è¯•
                    </button>
                </div>

                <div class="px-6 flex flex-col items-center mt-3">
                    <!-- ä¸»äººæ ¼æ²¹ç”»å¤§åœ† -->
                    <div class="w-64 h-64 rounded-full border-2 border-white/25 p-2 mb-6 relative">
                        <div class="w-full h-full rounded-full overflow-hidden shadow-[0_0_36px_rgba(255,255,250,0.32)]
                                    relative bg-black flex items-center justify-center">
                            <img src="${res.img}"
                                 loading="lazy"
                                 class="w-full h-full object-cover"
                                 alt="${res.name}">
                            <div class="absolute inset-0 bg-gradient-to-br from-black/5 via-transparent to-black/25"></div>
                        </div>
                        <!-- å°æ ‡ç­¾ -->
                        <div class="absolute -bottom-3 left-1/2 -translate-x-1/2 text-[11px] px-3 py-1 rounded-full
                                    bg-black/70 border border-white/30 shadow-md">
                            ${res.icon}  ${res.name}
                        </div>
                    </div>

                    <div class="mt-6 text-center mb-2 text-xs tracking-[0.35em] opacity-60 uppercase">
                        YOUR FRUIT PERSONA
                    </div>
                    <h1 class="text-3xl serif font-bold mb-2 text-center">
                        ${res.title}
                    </h1>

                    <div class="flex flex-wrap justify-center gap-2 mb-8">
                        ${res.keywords.map(k =>
                            `<span class="text-xs px-3 py-1 rounded-full border border-white/20 bg-white/6 text-orange-100">
                                ${k}
                            </span>`
                        ).join('')}
                    </div>

                    <div class="text-lg serif italic opacity-90 text-center mb-8 leading-relaxed max-w-xs">
                        ${res.quote}
                    </div>

                    <div class="w-full bg-black/55 backdrop-blur-xl rounded-2xl p-6 border border-white/14 mb-10">
                        <h3 class="text-[11px] opacity-60 uppercase tracking-wider mb-2">
                            äººæ ¼åˆ‡ç‰‡ Â· Analysis
                        </h3>
                        <p class="text-sm leading-7 text-gray-100 text-justify">
                            ${res.desc}
                        </p>
                    </div>

                    <!-- ç»é…äººæ ¼åŒºï¼šå°åœ†æ²¹ç”» + æ–‡æ¡ˆ -->
                    <div class="w-full bg-gradient-to-r from-indigo-900/70 to-purple-900/70
                                rounded-2xl p-6 border border-white/16 mb-10 relative overflow-hidden">
                        <div class="absolute -right-16 -top-16 w-40 h-40 rounded-full bg-white/10 blur-3xl"></div>

                        <div class="relative z-10 flex gap-4 items-center">
                            <div class="w-16 h-16 rounded-full border border-white/30 overflow-hidden shadow-lg flex-shrink-0">
                                <img src="${matchRes.img}" loading="lazy" class="w-full h-full object-cover" alt="${res.matchName}">
                            </div>
                            <div class="flex-1">
                                <div class="text-[11px] uppercase opacity-60 tracking-[0.2em] mb-1">
                                    Soulmate Fruit
                                </div>
                                <div class="font-semibold mb-2">
                                    ${res.matchName}
                                </div>
                                <p class="text-xs opacity-90 leading-relaxed italic border-l-2 border-white/40 pl-3">
                                    ${res.matchDesc}
                                </p>
                            </div>
                        </div>
                    </div>

                    <div class="w-full text-center text-[11px] opacity-55 pb-6 leading-relaxed">
                        Â· é•¿æŒ‰æˆªå›¾ï¼Œä¿å­˜ä½ çš„æ°´æœäººæ ¼ Â·<br/>
                        æ¬¢è¿åˆ†äº«åˆ°ç¤¾äº¤å¹³å°ï¼Œtag <span class="font-semibold">@ROACYZHENG</span><br/>
                        çœ‹çœ‹ä½ èº«è¾¹çš„æœ‹å‹éƒ½æ˜¯ä»€ä¹ˆæœã€‚
                    </div>
                </div>
            </div>
        `;
        app.innerHTML = html;
    }

    // ------------ 5. äº¤äº’é€»è¾‘ ------------
    function startQuiz() {
        currentState.view      = 'quiz';
        currentState.currentQ  = 0;
        currentState.answers   = [];
        currentState.finalResult = null;
        render();
    }

    function handleAnswer(idx) {
        currentState.answers.push(idx);

        if (currentState.currentQ < questions.length - 1) {
            currentState.currentQ++;
            render();
        } else {
            calculateResult();
            currentState.view = 'loading';
            render();
        }
    }

    function calculateResult() {
        let scores = {};
        currentState.answers.forEach((choiceIndex, qIndex) => {
            const weights = questions[qIndex].options[choiceIndex].weights;
            weights.forEach(fruit => {
                scores[fruit] = (scores[fruit] || 0) + 1;
            });
        });

        let maxScore = 0;
        for (let f in scores) if (scores[f] > maxScore) maxScore = scores[f];

        let winners = [];
        for (let f in scores) if (scores[f] === maxScore) winners.push(f);

        const winnerId = winners[Math.floor(Math.random() * winners.length)] || 'peach';
        currentState.finalResult = results[winnerId];
    }

    // ------------ 6. å¾®ä¿¡ç¯å¢ƒæç¤º ------------
    (function detectWeChat() {
        const ua = navigator.userAgent.toLowerCase();
        if (ua.indexOf('micromessenger') !== -1) {
            const tip = document.getElementById('wx-tip');
            if (tip) tip.classList.remove('hidden');
        }
    })();

    // åˆå§‹åŒ–
    render();
</script>

</body>
</html>
